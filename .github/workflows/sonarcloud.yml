name: SonarCloud CI
 
on:

  push:

    branches: [ main ]

  pull_request:

    types: [opened, synchronize, reopened]
 
jobs:

  build:

    name: Build and analyze

    runs-on: ubuntu-latest
 
    steps:

    - uses: actions/checkout@v3

    - name: Set up JDK

      uses: actions/setup-java@v3

      with:

        distribution: temurin

        java-version: '17'

    - name: Cache SonarCloud packages

      uses: actions/cache@v3

      with:

        path: ~/.sonar/cache

        key: ${{ runner.os }}-sonar

    - name: SonarCloud Scan

      uses: sonarsource/sonarcloud-github-action@master

      env:

        SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}

 
